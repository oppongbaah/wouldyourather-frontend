(this.webpackJsonptwitter=this.webpackJsonptwitter||[]).push([[1],{116:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),o=n(26),r=n.n(o),s=n(25),u=(n(67),n(41)),i=n(42),d=n(45),l=n(44),p=n(36),b=n(14),h=n(6),j=(n(43),n(38)),f=n(37),O=n(24),m=n(57),v=n(28),g=n(39),y=n(2),x=new O.a;var w,N=Object(s.b)((function(t){return{authedUser:t.users.authedUser.name,avatarURL:t.users.authedUser.url,users:t.users.payload.data}}),(function(t){return{dispatch_authedUser:function(e){return t(Object(v.a)(e))},dispatch_fetchUsers:function(){return t(Object(v.b)())},dispatch_fetchPoll:function(){return t(Object(g.b)())}}}))((function(t){Object(a.useEffect)((function(){x.get("authedUser")&&t.dispatch_authedUser(x.get("authedUser"))}),[]),Object(a.useEffect)((function(){t.dispatch_fetchUsers()}),[]),Object(a.useEffect)((function(){t.dispatch_fetchPoll()}),[]);var e=t.avatarURL,n=e?"/usersAvatar/".concat(e):"/usersAvatar/avatar.png";return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:"container-nav",children:[Object(y.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(y.jsx)("span",{className:"navbar-toggler-icon"})}),Object(y.jsx)("nav",{id:"navbarSupportedContent",className:"navbar navbar-expand-lg navbar-light bg-warning",children:Object(y.jsxs)("div",{className:"collapse navbar-collapse",children:[Object(y.jsxs)("ul",{className:"navbar-nav ml-auto topnav",children:[Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsx)(b.c,{className:"nav-link",activeClassName:"active",exact:!0,to:"/dashboard",children:"Dashboard"})}),Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsx)(b.c,{className:"nav-link",activeClassName:"active",to:{pathname:"/add",state:"authorised"},children:"New Poll"})}),Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsx)(b.c,{className:"nav-link",activeClassName:"active",to:{pathname:"/leaderboard",state:"authorised"},children:"Leaderboard"})}),Object(y.jsx)("li",{className:"dropd",children:Object(y.jsxs)("div",{className:"nav-item dropdown",children:[Object(y.jsxs)("p",{className:"nav-link dropdown-toggle",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:[t.authedUser,Object(y.jsx)(m.a,{})]}),Object(y.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:[Object(y.jsx)("div",{className:"dropdown-divider"}),Object(y.jsx)(b.b,{className:"dropdown-item",to:{pathname:"/users/login",state:{desc:"sign in"}},children:"Sign In"}),Object(y.jsx)("div",{className:"dropdown-divider"}),Object(y.jsx)(b.b,{className:"dropdown-item",to:{pathname:"/users/signup",state:{desc:"sign up"}},children:"Sign Up"}),Object(y.jsx)("div",{className:"dropdown-divider"}),Object(y.jsx)(b.b,{className:"dropdown-item",to:{pathname:"/users/logout",state:{desc:"sign out"}},children:"Sign Out"})]})]})}),x.get("authedUser")&&Object(y.jsx)("li",{className:"image",children:Object(y.jsx)("img",{src:n,alt:"avatar"})})]}),Object(y.jsx)("div",{})]})})]})})})),_=Object(a.lazy)((function(){return n.e(11).then(n.bind(null,128))})),S=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,137))})),U=Object(a.lazy)((function(){return n.e(9).then(n.bind(null,129))})),C=Object(a.lazy)((function(){return n.e(15).then(n.bind(null,130))})),E=Object(a.lazy)((function(){return n.e(4).then(n.bind(null,131))})),k=Object(a.lazy)((function(){return n.e(8).then(n.bind(null,132))})),z=Object(a.lazy)((function(){return n.e(6).then(n.bind(null,133))})),P=Object(a.lazy)((function(){return Promise.all([n.e(13),n.e(10)]).then(n.bind(null,134))})),T=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(12),n.e(5)]).then(n.bind(null,138))})),L=Object(a.lazy)((function(){return n.e(14).then(n.bind(null,135))})),q=Object(j.a)(w||(w=Object(p.a)(["\ndisplay: block;\nmargin: 20% auto;\nborder-color: tomato;\n"]))),D=function(t){Object(d.a)(n,t);var e=Object(l.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(y.jsx)("div",{className:"container",children:Object(y.jsxs)(b.a,{children:[Object(y.jsx)(N,{}),Object(y.jsx)(a.Suspense,{fallback:Object(y.jsx)(f.DotLoader,{color:"tomato",loading:!0,css:q,size:60}),children:Object(y.jsxs)(h.d,{children:[Object(y.jsx)(h.b,{exact:!0,path:"/",component:_}),Object(y.jsx)(h.b,{path:"/dashboard",component:S}),Object(y.jsx)(h.b,{path:"/add",component:U}),Object(y.jsx)(h.b,{path:"/leaderboard",component:C}),Object(y.jsx)(h.b,{path:"/users/login",component:E}),Object(y.jsx)(h.b,{path:"/users/logout",component:k}),Object(y.jsx)(h.b,{path:"/users/signup",component:z}),Object(y.jsx)(h.b,{path:"/questions/:id/unanswered",component:P}),Object(y.jsx)(h.b,{path:"/questions/:id/recommended",component:P}),Object(y.jsx)(h.b,{path:"/questions/:id/answered",component:T}),Object(y.jsx)(h.b,{component:L})]})})]})})}}]),n}(a.Component),A=function(t){t&&t instanceof Function&&n.e(16).then(n.bind(null,136)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,o=e.getLCP,r=e.getTTFB;n(t),a(t),c(t),o(t),r(t)}))},F=n(17),I=n(10),R=n(7),X={payload:{data:[],status:""},authedUser:{name:"",url:"",status:""}};var B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case R.e:return Object(I.a)(Object(I.a)({},t),{},{payload:{data:e.payload.users,status:e.payload.status}});case R.b:return Object(I.a)(Object(I.a)({},t),{},{authedUser:{name:e.payload.name,url:e.payload.avatar,status:e.payload.status}});default:return t}},J={payload:{data:[],status:""},vote:{data:[],status:"",option:""},btnStatus:"recommended",addedQuestion:{data:{},status:"",message:""}};var M=n(58),Q=Object(F.c)({users:B,polls:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case R.d:return Object(I.a)(Object(I.a)({},t),{},{payload:{data:e.payload.polls,status:e.payload.status}});case R.f:return Object(I.a)(Object(I.a)({},t),{},{vote:{data:e.payload.question,status:e.payload.status,option:e.payload.option}});case R.c:return Object(I.a)(Object(I.a)({},t),{},{btnStatus:e.status});case R.a:return Object(I.a)(Object(I.a)({},t),{},{addedQuestion:{data:e.payload.question,status:e.payload.status,message:e.payload.message}});default:return t}}}),V=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25}):F.d)(Object(F.a)(M.a)),G=Object(F.e)(Q,V);r.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(s.a,{store:G,children:Object(y.jsx)(D,{})})}),document.getElementById("root")),A()},28:function(t,e,n){"use strict";n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return j})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return m}));var a=n(23),c=n.n(a),o=n(31),r=n(7);function s(t,e){return{type:r.e,payload:{users:t,status:e}}}function u(t,e,n){return{type:r.b,payload:{name:t,avatar:e,status:n}}}var i=n(24),d=n(16),l=n.n(d),p=new i.a,b="https://wouldyouratherapplication.herokuapp.com";function h(){return function(t){try{t(s([],"loading")),l.a.get("".concat(b,"/users/fetch-all")).then((function(e){t(s(e.data,"done"))})).catch((function(e){console.log(e),t(s([],"failed"))}))}catch(e){console.log(e)}}}function j(t){return function(e){try{e(u("","","logging")),"Guest"===t?e(u(t,"","done")):l.a.get("".concat(b,"/users/fetch/").concat(t.trim())).then((function(n){e(u(t,n.data.imageURL,"done"))})).catch((function(t){console.log(t)}))}catch(n){console.log(n),e(u("","","failed"))}}}function f(t){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(b,"/users/login"),{method:"POST",headers:{"Access-Control-Allow-Origin":b,"Content-Type":"application/json",Authorization:"Basic ".concat(e)}}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}));case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}function m(t,e){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",fetch("".concat(b,"/users/signup"),{method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(t){t.text().then((function(t){alert(t),p.set("authedUser",e._id),n.push("/")}))})).catch((function(t){return console.log(t)})));case 4:t.prev=4,t.t0=t.catch(0),console.error(t.t0);case 7:case"end":return t.stop()}}),t,null,[[0,4]])})))).apply(this,arguments)}},39:function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"d",(function(){return l})),n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return b}));var a=n(7);function c(t,e){return{type:a.d,payload:{polls:t,status:e}}}function o(t,e,n){return{type:a.f,payload:{question:t,status:e,option:n}}}function r(t,e,n){return{type:a.a,payload:{question:t,status:e,message:n}}}var s=n(16),u=n.n(s),i="https://wouldyouratherapplication.herokuapp.com";function d(){return function(t){try{t(c([],"loading")),u.a.get("".concat(i,"/polls/fetch-all")).then((function(e){var n=e.data.map((function(t){return t})).sort((function(t,e){return t.timestamp<e.timestamp?1:-1}));t(c(n,"done"))})).catch((function(e){console.log(e),t(c([],"failed"))}))}catch(e){console.error(e)}}}function l(t,e,n){return function(a){try{a(o([],"voting","")),u.a.put("".concat(i,"/polls/vote/").concat(t,"/").concat(e,"?option=").concat(n)).then((function(t){a(o(t.data,"voted",n))})).catch((function(t){a(o([],"already voted",""))}))}catch(c){console.error(c)}}}function p(t){return function(e){try{e(function(t){return{type:a.c,status:t}}(t))}catch(n){console.log(n)}}}function b(t){return function(e){try{e(r({},"adding","")),u.a.post("".concat(i,"/polls/add"),t).then((function(t){e(r(t.data.question,"added",t.data.message))})).catch((function(t){console.log(t),e(r({},"failed","Error Adding Question"))}))}catch(n){console.log(n)}}}},43:function(t,e,n){},67:function(t,e,n){},7:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"f",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return u}));var a="poll/get",c="user/get",o="user/authed",r="question/vote",s="button/status",u="poll/add"}},[[116,2,3]]]);
//# sourceMappingURL=main.c2c56776.chunk.js.map